<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang="ru">
<head>
  <meta http-equiv="Content-Language" content="ru">
  <meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<title>Yadif деинтерлейс</title>
<link rel="stylesheet" type="text/css" href="../avisynth.css">

</head>
<body>
<h1>Yadif</h1>
<h2>Общая информация</h2>
<b>автор:</b> Fizick (Александр Балахнин)
<br><b>версия:</b> 1.7
<br><b>загрузка:</b> <a href="http://avisynth.org.ru/">http://avisynth.org.ru/</a> <br>
<b>категория:</b>  Деинтерлейс и удаление Pulldown<br>
<b>требования:</b> YV12, YUY2 цветовые форматы<br>
<b>лицензия:</b> GPL
<hr>

<p>
Перенос (порт) YADIF (Yet Another DeInterlacing Filter) дентерлейс фильтра из MPlayer от Michael Niedermayer (http://www.mplayerhq.hu).
Он проверяет пикселы предыдущего, текущего и последующего кадра для восстановления пропущенного поля
некоторым локально адаптивным  методом (выравнивающей края интерполяцией) и использует
пространственную проверку для предотвращения большинства артефактов.
</p>

<h2>Синтаксис и параметры</h2>
<p><code>Yadif</code> (<var>clip, int "mode", int "order", bool "planar", int "opt")</var></p>
<p><var>mode</var> = 0 : временная и пространственная проверки (по умолчанию).</p>
<p> = 1 : удвоение частоты кадров (bob), временная и пространственная проверки.</p>
<p> = 2 : не делать пространственную проверку чересстрочности.</p>
<p> = 3 : удвоение частоты кадров  (bob), не делать пространственную проверку чересстрочности.
</p>
<p><var>order</var> = -1 : порядок полей как полагает (по умолчанию).</p>
<p> = 0 : Нижнее поле первое.</p>
<p> = 1 : Верхнее поле первое.</p>
<p><var>planar</var> = false : обычный YUY2 формат пиксела Avisynth (по умолчанию).</p>
<p> = true : флаг (игнорируемый для YV12) для (хакнутого) планарного YUY2 цветового формата входных и выходных клипов,
совместимого с функциями Interleaved2planar и Planar2Interleaved из плагина RemoveGrain (SSETools) от Kassandro
(для исключения многократных преобразований).
</p>
<p><var>opt</var> = -1 : CPU оптимизация - автоматически (по умолчанию).</p>
<p> = 0 : slow C version.</p>
<p> = 1 : Integer SSE.</p>
<p> = 2 : SSE2.</p>
<p> = 3 : SSSE3 (some).</p>

<h2>Особенности и ограничения</h2>
<p>Реализован как Avisynth C-плагин (не обычный Avisynth плагин).<br>
Должен загружаться командой Load_Stdcall_plugin("yadif.dll") или Load<b>C</b>plugin("yadif.dll")  (не LoadPlugin !).
Не используйте автозагрузку.
(Замечание: в Avisynth v2.5.7-2.5.8 нет необходимости явной загрузки Avisynth_c.dll пользователем для таких плагинов.)
</p>
<p>Тестирован с Avisynth v2.5.7,2.5.8 (наверно работает с v2.5.6 и выше).</p>
<p>Четность полей входного клипа должна быть правильно задана (используйте AssumeTFF, AssumeBFF).</p>
<p>Очень быстрый. Ассемблерная SSEMMX оптимизация из mplayer (компилирован MinGW GCC). Также SSE2 (частично SSSE3) из ffdshow-tryout (подправлено).</p>
<p>YV12 и YUY2 (обычный и планарный) цветовые форматы.</p>

<h2>Обсуждение</h2>
<p><a href="http://forum.doom9.org/showthread.php?t=124284">http://forum.doom9.org/showthread.php?t=124284</a></p>

<h2> Лицензия</h2>
<p>Программа распространяется свободно на условиях лицензии GNU GPL. Смотрите gpl-rus.txt.
Если Вы распространяете бинарную DLL, вы также обязаны распространять исходные коды,
пожалуйста не забудьте и данную документацию.
</p>

<h2>Ревизии</h2>

<p>Версия 0.1 (03.04.2007)</p>
<ul>
<li>Первая версия</li>
</ul>

<p>Версия 0.2 (04.04.2007)</p>
<ul>
<li>Исправлена ошибка с неверно использованной четностью.</li>
<li>Добавлены Bob-режимы mode=1,3.</li>
<li>Добавлен параметр order.</li>
</ul>

<p>Версия 0.3 (06.04.2007)</p>
<ul>
<li>Окончательно (?) исправлена ошибка с неверно использованной четностью.</li>
<li>Установлена корректная частота кадров в  Bob-режимах mode=1,3.</li>
</ul>

<p>Версия 0.4 (06.04.2007)</p>
<ul>
<li>Окончательно (!) исправлена ошибка с неверно использованной четностью для TFF без AssumeTFF.</li>
<li>Снято ограничение на одинаковость питчей кадров.</li>
</ul>

<p>Версия 0.5 (17.04.2007)</p>
<ul>
<li>Исправлена ошибка с самым первым и самым последним кадром.</li>
</ul>

<p>Версия 0.6 (07.05.2007)</p>
<ul>
<li>Добавил YUY2 формат.</li>
</ul>

<p>Версия 0.7 (31.05.2007)</p>
<ul>
<li>Обработка первых и последних строк пространственным усреднением или дублированием (просил puddy).</li>
</ul>

<p>Версия 0.8 (16.06.2007)</p>
<ul>
<li>Вроде исправил ошибку доступа к памяти (сообщенную akapuma).</li>
</ul>

<p>Версия 0.9 (22.07.2007)</p>
<ul>
<li>Исправил ошибку доступа к памяти для некоторых ширины и высоты и YUY2 (сообщенную ronnylov).</li>
</ul>

<p>Версия 1.1 (06.08.2009)</p>
<ul>
<li>Добавил более быстрыую SSE2 (и некоторую SSSE3) ручную оптимизацию от H.Yamagata из ffdshow-tryout.
 Компиляция с GCC версии выше 4.1.</li>
<li>Добавил немного более быстрое MMX преобразование для формата YUY2.</li>
<li>Добавил планарный хакнутый YUY2 цветовой формат (совместимый с SSETools от Kassandro).</li>
</ul>

<p>Версия 1.2 (07.08.2009)</p>
<ul>
<li>Немного более быстрое SSEMMX преобразование для формата YUY2.</li>
</ul>

<p>Версия 1.3 (12.08.2009)</p>
<ul>
<li>Добавил параметр "opt" для ручного выбора CPU оптимизации.</li>
<li>Исправил ошибку в SSE2/SSSE3 коде (из ffdshow), теперь результаты одинаковы с C/iSSE.</li>
</ul>

<p>Версия 1.4 (13.08.2009)</p>
<ul>
<li>Разрешил SSEMMX YUY2 преобразование при ручном выборе SSE2/SSSE3 opt.</li>
</ul>

<p>Версия 1.6 (26.08.2009)</p>
<ul>
<li>Слепая попытка исправить детектирование AMD Phenom (спасибо canTsTop за сообщение об ошибке).</li>
</ul>

<p>Версия 1.7 (08.10.2009)</p>
<ul>
<li>Слепая попытка исправить детектирование P4 (спасибо vlada за сообщение об ошибке).</li>
</ul>

<h3><a href="yadif17.zip">Скачать Yadif версии 1.7</a></h3>

</body>
</html>
